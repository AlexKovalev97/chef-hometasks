nginx output

# chef-client
Starting Chef Client, version 14.4.56
resolving cookbooks for run list: ["nginx"]
Synchronizing Cookbooks:
  - nginx (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
Converging 4 resources
Recipe: nginx::default
  * yum_package[nginx] action install
    - install version 1:1.12.2-2.el7.x86_64 of package nginx
  * service[nginx] action enable
    - enable service service[nginx]
  * service[nginx] action start
    - start service service[nginx]
  * directory[/var/www/html] action create
    - create new directory /var/www/html
  * template[/etc/nginx/conf.d/jboss.conf] action create
    - create new file /etc/nginx/conf.d/jboss.conf
    - update content in file /etc/nginx/conf.d/jboss.conf from none to 1843b8
    --- /etc/nginx/conf.d/jboss.conf	2018-09-11 15:06:57.004611856 +0100
    +++ /etc/nginx/conf.d/.chef-jboss20180911-6827-g778yi.conf	2018-09-11 15:06:57.004611856 +0100
    @@ -1 +1,10 @@
    +server {
    +        listen 80;
    +        server_name 10.0.0.10;
    +        location /jboss/ {
    +	    proxy_set_header   X-Real-IP $remote_addr;
    +            proxy_set_header   Host      $http_host;
    +            proxy_pass http://10.0.0.20:8080;
    +        }
  * service[nginx] action reload
    - reload service service[nginx]
server {
Chef Client finished, 6/6 resources updated in 25 seconds
    
    
jboss output

# chef-client
Starting Chef Client, version 14.4.56
resolving cookbooks for run list: ["task1_jboss"]
Synchronizing Cookbooks:
  - task1_jboss (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
Converging 9 resources
Recipe: task1_jboss::default
  * yum_package[java-1.8.0-openjdk] action install
    - install version 1:1.8.0.181-3.b13.el7_5.x86_64 of package java-1.8.0-openjdk
  * linux_user[web] action create
    - create user web
  * group[web] action create (up to date)
  * yum_package[unzip] action install (up to date)
  * remote_file[/opt/jboss.zip] action create
    - create new file /opt/jboss.zip
    - update content in file /opt/jboss.zip from none to be93bc
    (file sizes exceed 10000000 bytes, diff output suppressed)
    - change owner from '' to 'web'
    - change group from '' to 'web'
  * bash[unzip] action run
    - execute "bash"  "/tmp/chef-script20180911-15877-1cohbjn"
  * systemd_unit[jboss.service] action create
  Recipe: <Dynamically Defined Resource>
    * file[/etc/systemd/system/jboss.service] action create
      - create new file /etc/systemd/system/jboss.service
      - update content in file /etc/systemd/system/jboss.service from none to 7e4aa1
      --- /etc/systemd/system/jboss.service	2018-09-11 15:04:57.398191097 +0100
      +++ /etc/systemd/system/.chef-jboss20180911-15877-1g7nsb1.service	2018-09-11 15:04:56.725177643 +0100
      @@ -1 +1,12 @@
      +  [Unit]
      +  Description=Jboss Application Server
      +  After=network.target
      +  [Service]
      +  Type=forking
      +  User=web
      +  Group=web
      +  ExecStart=/bin/bash -c 'nohup /opt/jboss/bin/run.sh -b 10.0.0.20 &'
      +  ExecStop=/bin/bash -c 'bin/shutdown.sh -s 10.0.0.20 -u admin -p admin'
      +  [Install]
      +  WantedBy=multi-user.target
      - change mode from '' to '0644'
      - change owner from '' to 'root'
      - change group from '' to 'root'
    - creating unit: jboss.service
Recipe: task1_jboss::default
  * systemd_unit[jboss.service] action enable
    - enabling unit: jboss.service
  * systemd_unit[jboss.service] action start
    - starting unit: jboss.service
  * remote_file[/opt/jboss/server/default/deploy/sample.war] action create_if_missing
     - Progress: 100%
    - create new file /opt/jboss/server/default/deploy/sample.war
    - update content in file /opt/jboss/server/default/deploy/sample.war from none to 89b33c
    (new content is binary, diff output suppressed)
    - change owner from '' to 'web'
    - change group from '' to 'web'

    - http_request[check] GET to http://10.0.0.20:8080/sample

Running handlers:
Running handlers complete
Chef Client finished, 10/12 resources updated in 15 minutes 16 seconds

# knife environment show lab
chef_type:           environment
cookbook_versions:
default_attributes:
  nginx:
    dest:    html
    port:    80
    version: 1.12.2
description:
json_class:          Chef::Environment
name:                lab
override_attributes:


# knife node edit nginx
{
  "name": "nginx",
  "chef_environment": "lab",
  "normal": {
    "tags": [

    ]
  },
  "policy_name": null,
  "policy_group": null,
  "run_list": [
  "role[nginx]"
]

}


# knife node edit jboss
{
  "name": "jboss",
  "chef_environment": "lab",
  "normal": {
    "tags": [

    ]
  },
  "policy_name": null,
  "policy_group": null,
  "run_list": [
  "role[jboss]"
]

}


# knife role show nginx
chef_type:           role
default_attributes:
description:
env_run_lists:
json_class:          Chef::Role
name:                nginx
override_attributes:
run_list:            recipe[nginx]


# knife role show jboss
chef_type:           role
default_attributes:
description:
env_run_lists:
json_class:          Chef::Role
name:                jboss
override_attributes:
run_list:            recipe[task1_jboss]
    